<script setup lang="ts">
import { computed } from 'vue'
import BaseButton from '@/components/ui/BaseButton.vue'
import SectionTitle from '@/components/common/SectionTitle.vue'
import SubtleLabel from '@/components/common/SubtleLabel.vue'

const props = defineProps<{
  completedSessionsCount: number
  requiredSessions: number
  onGoTraining: () => void
}>()

const progressPercent = computed(() =>
  Math.min((props.completedSessionsCount / props.requiredSessions) * 100, 100)
)
</script>

<template>
  <div class="card p-8 section-stack items-center text-center">
    <div class="text-6xl mb-2 animate-bounce">ğŸ”’</div>
    <SectionTitle title="åŠŸèƒ½å°šæœªè§£é–" spacing="sm" :show-accent="false" class="justify-center" />
    <SubtleLabel
      text="ç‚ºäº†æä¾›ç²¾æº–çš„å€‹äººåŒ–ç‡Ÿé¤Šå»ºè­°ï¼Œæˆ‘å€‘éœ€è¦æ”¶é›†æ›´å¤šæ‚¨çš„è¨“ç·´æ•¸æ“šã€‚"
      tone="secondary"
      class="text-sm max-w-xs mx-auto block"
    />

    <div class="w-full max-w-xs bg-[var(--color-surface-soft)] rounded-full h-3 overflow-hidden mt-4">
      <div
        class="h-full bg-primary transition-all duration-1000"
        :style="{ width: `${progressPercent}%` }"
      ></div>
    </div>
    <p class="mt-2">
      <SubtleLabel
        :text="`è¨“ç·´é€²åº¦ï¼š${completedSessionsCount} / ${requiredSessions} å ´`"
        weight="bold"
        class="text-primary"
      />
    </p>

    <div class="bg-[var(--color-surface-soft)] p-4 rounded-xl text-left w-full max-w-xs mt-2">
      <SectionTitle title="è§£é–å¾Œæ‚¨å°‡ç²å¾—ï¼š" as="h4" size="sm" spacing="sm" :show-accent="false" />
      <ul class="list-disc pl-5 space-y-1">
        <li>
          <SubtleLabel text="âœ¨ åŸºæ–¼èªçŸ¥è¡¨ç¾çš„ç²¾æº–ç‡Ÿé¤Šå»ºè­°" tone="secondary" class="block" />
        </li>
        <li>
          <SubtleLabel text="ğŸ’Š é‡å°å¼±é …ç¶­åº¦çš„è£œå……æ–¹æ¡ˆ" tone="secondary" class="block" />
        </li>
        <li>
          <SubtleLabel text="ğŸ‘¨â€âš•ï¸ å°ˆæ¥­é†«å¸«èˆ‡ç‡Ÿé¤Šå¸«çš„å»ºè­°" tone="secondary" class="block" />
        </li>
      </ul>
    </div>

    <BaseButton size="md" full-width class="max-w-xs mt-4" @click="onGoTraining">
      å‰å¾€æ¯æ—¥è¨“ç·´
    </BaseButton>
  </div>
</template>
